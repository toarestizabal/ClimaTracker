<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>WeatherApp Pro</ion-title>
    <ion-buttons slot="end">
      <ion-button routerLink="/favorites"> Favoritos</ion-button>
      <ion-button routerLink="/history">Historial</ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <div class="container">
    
    <ion-card>
      <ion-card-header>
        <ion-card-title>Buscar Clima</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <ion-item>
          <ion-input 
            [(ngModel)]="city" 
            placeholder="Ingresa una ciudad"
            (keyup.enter)="searchWeather()">
          </ion-input>
        </ion-item>
        <ion-button 
          expand="block" 
          (click)="searchWeather()"
          color="primary"
          style="margin-top: 15px;">
          Buscar Clima
        </ion-button>
      </ion-card-content>
    </ion-card>

    
    <ion-card *ngIf="weatherData" class="fade-in">
      <ion-card-header>
        <ion-card-title>{{ weatherData.name }}, {{ weatherData.sys.country }}</ion-card-title>
        <ion-card-subtitle>
          {{ weatherData.weather[0].description | titlecase }}
        </ion-card-subtitle>
      </ion-card-header>
      
      <ion-card-content>
        <div style="text-align: center; margin: 20px 0;">
          <img [src]="'https://openweathermap.org/img/wn/' + weatherData.weather[0].icon + '@2x.png'" 
               alt="Weather icon">
          <h1 style="font-size: 2.5em; margin: 10px 0;">
            {{ weatherData.main.temp }}°C
          </h1>
          <p>Sensación térmica: {{ weatherData.main.feels_like }}°C</p>
        </div>

        <ion-grid>
          <ion-row>
            <ion-col size="6">
              <ion-item>
                <ion-icon name="water-outline" slot="start"></ion-icon>
                <ion-label>Humedad</ion-label>
                <ion-text>{{ weatherData.main.humidity }}%</ion-text>
              </ion-item>
            </ion-col>
            <ion-col size="6">
              <ion-item>
                <ion-icon name="speedometer-outline" slot="start"></ion-icon>
                <ion-label>Presión</ion-label>
                <ion-text>{{ weatherData.main.pressure }} hPa</ion-text>
              </ion-item>
            </ion-col>
          </ion-row>
          
          <ion-row>
            <ion-col size="6">
              <ion-item>
                <ion-icon name="flag-outline" slot="start"></ion-icon>
                <ion-label>Viento</ion-label>
                <ion-text>{{ weatherData.wind.speed }} m/s</ion-text>
              </ion-item>
            </ion-col>
            <ion-col size="6">
              <ion-item>
                <ion-icon name="eye-outline" slot="start"></ion-icon>
                <ion-label>Visibilidad</ion-label>
                <ion-text>{{ weatherData.visibility / 1000 }} km</ion-text>
              </ion-item>
            </ion-col>
          </ion-row>
        </ion-grid>

        
        <ion-button 
          expand="block" 
          color="success" 
          (click)="addToFavorites()"
          style="margin-top: 15px;">
          <ion-icon name="star-outline" slot="start"></ion-icon>
          Agregar a Favoritos
        </ion-button>
      </ion-card-content>
    </ion-card>

    
    <ion-card *ngIf="weatherData === null" color="danger">
      <ion-card-content>
        <ion-text color="light">
          <h3>Ciudad no encontrada</h3>
          <p>Verifica el nombre e intenta nuevamente.</p>
        </ion-text>
      </ion-card-content>
    </ion-card>
  </div>
</ion-content>